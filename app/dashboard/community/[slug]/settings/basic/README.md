# Страница базовых настроек сообщества

## Описание

Эта страница позволяет редактировать основную информацию сообщества, включая:

- **Основная информация**: Название, категория, краткое описание
- **Фильтры аудитории**: Для кого, Я хочу, Возрастные категории
- **Контактная информация**: Email для связи, Телефон
- **Социальные сети**: VK, Telegram, MAX, Сайт

## Структура файлов

```
app/dashboard/community/[slug]/settings/basic/
├── actions.ts                      # Server actions для обновления данных
├── page.tsx                        # Основная страница
├── components/
│   └── BasicSettingsForm.tsx      # Клиентский компонент формы
└── README.md                       # Этот файл
```

## Изменения в базе данных

Для работы этой страницы необходимо применить миграцию:

```bash
# Применить миграцию через Supabase CLI
supabase db push

# Или применить SQL напрямую в Supabase Dashboard
```

Миграция добавляет следующие поля в таблицу `communities`:
- `contact_email` (TEXT) - Email для связи
- `contact_phone` (TEXT) - Телефон для связи  
- `age_categories` (TEXT[]) - Массив возрастных категорий

Файл миграции: [`supabase/migrations/20231215_add_contact_fields_to_communities.sql`](../../../../../../../supabase/migrations/20231215_add_contact_fields_to_communities.sql)

## Обновленные типы

В файле [`types/community.ts`](../../../../../types/community.ts) обновлен интерфейс `SocialLinks`:

```typescript
export interface SocialLinks {
  vk?: string;
  telegram?: string;
  max?: string;        // Добавлено
  website?: string;
  facebook?: string;
}
```

## Использование

Страница доступна по адресу:
```
/dashboard/community/[slug]/settings/basic
```

Где `[slug]` - это URL-идентификатор сообщества.

## Функциональность

### Валидация
- Название сообщества - обязательное поле
- Описание - обязательное, максимум 200 символов
- Категория - обязательное поле
- Email - обязательное поле с валидацией формата

### Сохранение
- Все изменения сохраняются одним запросом
- После успешного сохранения показывается уведомление
- При ошибке отображается сообщение об ошибке
- Автоматическая инвалидация кеша страниц

## Безопасность

- RLS политики проверяют, что пользователь является владельцем сообщества
- Все server actions защищены проверкой авторизации
- Валидация данных на сервере и клиенте

## Интеграция

Страница интегрирована с:
- Главной страницей настроек: [`/dashboard/community/[slug]/settings`](../page.tsx)
- Формой создания сообщества: [`Step1BasicInfo.tsx`](../../../../create-community/components/Step1BasicInfo.tsx)